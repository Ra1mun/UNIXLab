# Микросервисная система обработки задач

Это микросервисная архитектура, демонстрирующая горизонтальное масштабирование и обработку сообщений с использованием Apache Kafka в качестве брокера сообщений.

## Архитектура

Система состоит из следующих компонентов:

1. **Сервис-производитель**
   - Генерирует случайные задания и отправляет их в Kafka.
   - Задачи включают в себя различные типы: обработать_данные, сгенерировать_отчет, отправить_уведомление, обновить_базу данных

2. **Worker Service**
   - Потребляет задачи из Kafka
   - Горизонтально масштабируемый (3 реплики по умолчанию)
   - Каждый рабочий обрабатывает задания независимо

3. **Брокер сообщений** (Apache Kafka)
   - Занимается распределением сообщений между производителем и рабочими
   - Обеспечивает надежную доставку сообщений


## Предварительные условия

- Docker
- Docker Compose

## Запуск системы

1. Соберите и запустите все сервисы:
   ``bash
   docker-compose up --build
   ```

2. Масштабируем количество рабочих:
   ``bash
   docker-compose up --scale worker=5
   ```

3. Остановить все сервисы:
   ``bash
   docker-compose down
   ```

## Мониторинг

- Производитель выводит сообщения при отправке заданий
- Каждый рабочий выводит сообщения, когда получает и обрабатывает задания
- Вы можете увидеть имена хостов рабочих в журналах, чтобы проверить балансировку нагрузки

## Детали архитектуры

- Производитель генерирует задания каждые 2 секунды
- Рабочие автоматически потребляют задания из Kafka
- Kafka гарантирует, что каждая задача будет обрабатываться только одним работником
- Система горизонтально масштабируема - вы можете добавить больше рабочих без изменения кода